<project name="compilatrocious" default="parser" basedir=".">
    <property name="src" location="src" />
    <property name="build" location="build" />

    <target name="init" description="Initialize build environment">
        <mkdir dir="${build}/grammar_parser" />
    </target>

    <target name="javacc" depends="init" description="Generate parser">
        <javacc
            target="src/mini_java.jj"
            outputdirectory="${build}/grammar_parser"
            javacchome="lib/javacc-5.0"
            />
    </target>

    <target name="parser" depends="javacc" description="Compile parser">
        <javac srcdir="${build}/grammar_parser" destdir="${build}/grammar_parser" />
    </target>

    <target name="clean" description="Clean up.">
        <delete dir="${build}" />
    </target>

</project>
